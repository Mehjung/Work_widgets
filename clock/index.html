<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uhr Widget</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;background:transparent;overflow:hidden}
.widget{text-align:center;padding:16px;width:100%}
.clock-face{width:140px;height:140px;margin:0 auto 12px;border-radius:50%;border:3px solid #1a1a2e;position:relative;background:white;box-shadow:0 4px 16px rgba(0,0,0,0.08)}
.clock-face::after{content:'';position:absolute;width:8px;height:8px;background:#ec0016;border-radius:50%;top:50%;left:50%;transform:translate(-50%,-50%);z-index:10}
.tick{position:absolute;width:2px;background:#ddd;top:6px;left:50%;transform-origin:50% 64px;height:8px;margin-left:-1px}
.tick.major{height:14px;width:2.5px;background:#1a1a2e;margin-left:-1.25px}
.hand{position:absolute;bottom:50%;left:50%;transform-origin:50% 100%;border-radius:3px}
.hour-hand{width:4px;height:38px;background:#1a1a2e;margin-left:-2px;z-index:3}
.minute-hand{width:3px;height:52px;background:#555;margin-left:-1.5px;z-index:4}
.second-hand{width:1.5px;height:56px;background:#ec0016;margin-left:-.75px;z-index:5}
.digital-time{font-size:32px;font-weight:700;color:#1a1a2e;letter-spacing:1px;font-variant-numeric:tabular-nums}
.digital-seconds{color:#ec0016}
.digital-date{font-size:12px;color:#888;margin-top:4px}
.label{font-size:10px;color:#aaa;text-transform:uppercase;letter-spacing:2px;margin-top:8px}
body.dark{background:#1a1a2e}
body.dark .digital-time{color:#fff}
body.dark .digital-date{color:rgba(255,255,255,.5)}
body.dark .label{color:rgba(255,255,255,.3)}
body.dark .clock-face{border-color:rgba(255,255,255,.15);background:#16213e;box-shadow:0 4px 16px rgba(0,0,0,.3)}
body.dark .tick{background:rgba(255,255,255,.15)}
body.dark .tick.major{background:rgba(255,255,255,.5)}
body.dark .hour-hand{background:#fff}
body.dark .minute-hand{background:rgba(255,255,255,.7)}
</style>
</head>
<body>
<div class="widget">
    <div class="clock-face" id="analogClock">
        <div class="hand hour-hand" id="hour"></div>
        <div class="hand minute-hand" id="minute"></div>
        <div class="hand second-hand" id="second"></div>
    </div>
    <div class="digital-time" id="digitalTime">--:--</div>
    <div class="digital-date" id="digitalDate"></div>
    <div class="label" id="label">Mitteleuropäische Zeit</div>
</div>
<script>
const P=new URLSearchParams(location.search);
const mode=P.get('mode')||'both',theme=P.get('theme')||'light',tz=P.get('tz')||'Europe/Berlin',lbl=P.get('label');
if(theme==='dark')document.body.classList.add('dark');
if(mode==='digital')document.querySelector('.clock-face').style.display='none';
if(mode==='analog'){document.getElementById('digitalTime').style.display='none';document.getElementById('digitalDate').style.display='none'}
if(lbl)document.getElementById('label').textContent=lbl;
const cf=document.getElementById('analogClock');
for(let i=0;i<60;i++){const t=document.createElement('div');t.className='tick'+(i%5===0?' major':'');t.style.transform=`rotate(${i*6}deg)`;cf.insertBefore(t,cf.firstChild)}
const days=['Sonntag','Montag','Dienstag','Mittwoch','Donnerstag','Freitag','Samstag'];
const months=['Januar','Februar','März','April','Mai','Juni','Juli','August','September','Oktober','November','Dezember'];
function tick(){
    const now=new Date(new Date().toLocaleString('en-US',{timeZone:tz}));
    const h=now.getHours(),m=now.getMinutes(),s=now.getSeconds(),ms=now.getMilliseconds();
    document.getElementById('second').style.transform=`rotate(${(s+ms/1000)*6}deg)`;
    document.getElementById('minute').style.transform=`rotate(${(m+s/60)*6}deg)`;
    document.getElementById('hour').style.transform=`rotate(${((h%12)+m/60)*30}deg)`;
    document.getElementById('digitalTime').innerHTML=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}<span class="digital-seconds">:${String(s).padStart(2,'0')}</span>`;
    document.getElementById('digitalDate').textContent=`${days[now.getDay()]}, ${now.getDate()}. ${months[now.getMonth()]} ${now.getFullYear()}`;
}
tick();setInterval(tick,50);
</script>
</body>
</html>
