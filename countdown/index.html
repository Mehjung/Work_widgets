<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Countdown Widget</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;background:transparent;overflow:hidden}
.widget{text-align:center;padding:20px;width:100%}
.title{font-size:13px;color:#888;text-transform:uppercase;letter-spacing:2px;margin-bottom:16px;font-weight:600}
.grid{display:flex;justify-content:center;gap:12px}
.unit{background:#1a1a2e;border-radius:12px;padding:16px 12px;min-width:72px;box-shadow:0 4px 16px rgba(0,0,0,.15);position:relative;overflow:hidden}
.unit::after{content:'';position:absolute;top:50%;left:0;right:0;height:1px;background:rgba(255,255,255,.06)}
.val{font-size:36px;font-weight:800;color:#fff;font-variant-numeric:tabular-nums;line-height:1}
.lbl{font-size:10px;color:rgba(255,255,255,.5);text-transform:uppercase;letter-spacing:1.5px;margin-top:8px}
.info{font-size:11px;color:#aaa;margin-top:16px}
.accent{color:#ec0016}
.done{font-size:20px;font-weight:700;color:#ec0016;display:none}
.pbar-wrap{margin:16px auto 0;height:4px;background:rgba(0,0,0,.08);border-radius:2px;overflow:hidden;max-width:320px}
.pbar{height:100%;background:linear-gradient(90deg,#ec0016,#ff6b6b);border-radius:2px;transition:width 1s linear;width:0}
body.dark{background:#1a1a2e}
body.dark .title{color:rgba(255,255,255,.5)}
body.dark .unit{background:rgba(255,255,255,.08);box-shadow:none;border:1px solid rgba(255,255,255,.1)}
body.dark .info{color:rgba(255,255,255,.4)}
body.dark .pbar-wrap{background:rgba(255,255,255,.1)}
body.compact .unit{min-width:56px;padding:10px 8px}
body.compact .val{font-size:24px}
body.compact .grid{gap:8px}
</style>
</head>
<body>
<div class="widget">
    <div class="title" id="title">Countdown</div>
    <div class="grid" id="cd">
        <div class="unit"><div class="val" id="d">--</div><div class="lbl">Tage</div></div>
        <div class="unit"><div class="val" id="h">--</div><div class="lbl">Std</div></div>
        <div class="unit"><div class="val" id="m">--</div><div class="lbl">Min</div></div>
        <div class="unit"><div class="val" id="s">--</div><div class="lbl">Sek</div></div>
    </div>
    <div class="pbar-wrap"><div class="pbar" id="pb"></div></div>
    <div class="info" id="info"></div>
    <div class="done" id="done">✅ Frist erreicht!</div>
</div>
<script>
const P=new URLSearchParams(location.search);
const target=new Date(P.get('target')||'2026-02-28T23:59:00');
const start=P.get('start')?new Date(P.get('start')):null;
const theme=P.get('theme')||'light';
if(theme==='dark')document.body.classList.add('dark');
if(P.get('compact')==='true')document.body.classList.add('compact');
document.getElementById('title').textContent=P.get('title')||'Countdown';
document.getElementById('done').textContent=P.get('done')||'✅ Frist erreicht!';
const opts={weekday:'long',year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit'};
document.getElementById('info').innerHTML='Ziel: <span class="accent">'+target.toLocaleDateString('de-DE',opts)+'</span>';
function tick(){
    const diff=target-new Date();
    if(diff<=0){document.getElementById('cd').style.display='none';document.querySelector('.pbar-wrap').style.display='none';document.getElementById('done').style.display='block';return}
    const dd=Math.floor(diff/864e5),hh=Math.floor(diff%864e5/36e5),mm=Math.floor(diff%36e5/6e4),ss=Math.floor(diff%6e4/1e3);
    document.getElementById('d').textContent=String(dd).padStart(2,'0');
    document.getElementById('h').textContent=String(hh).padStart(2,'0');
    document.getElementById('m').textContent=String(mm).padStart(2,'0');
    document.getElementById('s').textContent=String(ss).padStart(2,'0');
    if(start){const pct=Math.min(100,Math.max(0,((new Date()-start)/(target-start))*100));document.getElementById('pb').style.width=pct+'%'}
    else document.querySelector('.pbar-wrap').style.display='none';
}
tick();setInterval(tick,1000);
</script>
</body>
</html>
